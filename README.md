# 多链钱包监控系统

这是一个用Java编写的多链钱包监控和自动转账程序，使用Alchemy API监控50+个区块链网络上的钱包，支持ERC20代币监控，一旦发现有资金就自动转移到指定的目标地址。

## ✨ 功能特性

- 🔗 **全链支持**: 支持Alchemy的所有EVM兼容链（50+条链）+ 自定义t3rn链
- 🪙 **代币监控**: 支持ERC20代币监控和转账
- 🎯 **智能转账**: 自动识别ERC20代币并执行转账操作
- 🖥️ **配置菜单**: 用户友好的图形化配置界面
- 🔄 **断点续传**: 支持从上次中断的地方继续监控
- ⚡ **实时监控**: 每10秒检查一次所有钱包的余额
- 📊 **监控统计**: 实时显示监控状态和处理进度
- 💾 **配置管理**: 支持配置导入导出功能
- 📝 **详细日志**: 完整的操作日志记录

## 🌐 支持的区块链网络

### 主要EVM链
- **Layer 1**: Ethereum, BNB Smart Chain, Avalanche C-Chain, Polygon
- **Layer 2**: Arbitrum One & Nova, Optimism, Base, Polygon zkEVM
- **高性能链**: Blast, Scroll, Linea, Mantle, zkSync Era

### 新兴EVM链
- Sonic, ZetaChain, Berachain, CrossFi, Soneium, Unichain
- World Chain, Rootstock, Shape, ApeChain, Geist, Lens
- Abstract, opBNB, Ink, Lumia, Superseed, Anime, Story
- Botanix, HyperEVM, Celo, Gnosis Chain, Metis

### 自定义链
- **t3rn Mainnet** (Chain ID: 819, Symbol: TRN)

### 非EVM链（监控支持）
- Solana, Starknet（转账功能需要额外开发）

## 🔧 环境要求

- Java 11 或更高版本
- Maven 3.6 或更高版本
- 稳定的网络连接
- Alchemy API密钥

## 🚀 安装和配置

### 1. 项目准备

```bash
# 克隆或下载项目
git clone https://github.com/haohaoi34/jiankong.git
cd MultiChainWalletMonitor

# 或使用现有文件夹
cd MultiChainWalletMonitor
```

### 2. 编译项目

```bash
mvn clean compile
```

### 3. 打包项目

```bash
mvn package
```

## 📖 使用方法

### 1. 启动程序

```bash
# 使用Maven运行
mvn exec:java -Dexec.mainClass="com.monitor.MultiChainWalletMonitor"

# 或运行打包后的JAR文件
java -jar target/multi-chain-wallet-monitor-1.0.0.jar
```

### 2. 配置菜单系统

程序启动后会显示配置菜单：

```
╔════════════════════════════════════════════════════════════════╗
║                    多链钱包监控系统配置                        ║
║                Multi-Chain Wallet Monitor                     ║
╚════════════════════════════════════════════════════════════════╝

┌─────────────────── 主菜单 ───────────────────┐
│  1. 配置收款地址                             │
│  2. 配置监控地址                             │
│  3. 配置Alchemy API                          │
│  4. 开始监控                                 │
│  5. 查看当前配置                             │
│  6. 导出配置                                 │
│  7. 导入配置                                 │
│  0. 退出程序                                 │
└─────────────────────────────────────────────┘
```

### 3. 配置步骤

#### 3.1 配置收款地址
- 选择菜单选项 `1`
- 输入你的收款钱包地址（0x开头的42位地址）

#### 3.2 配置监控地址
选择菜单选项 `2`，然后选择：
- **选项1**: 从私钥批量生成地址（推荐）
  - 一行输入一个私钥（支持带/不带0x前缀）
  - 输入 `END` 结束输入
  - 程序自动生成对应的钱包地址
  
- **选项2**: 手动添加监控地址
  - 直接输入要监控的钱包地址
  
- **选项3**: 从文件导入地址
  - 从文本文件批量导入地址

#### 3.3 配置Alchemy API
- 选择菜单选项 `3`
- 输入你的Alchemy API密钥

#### 3.4 开始监控
选择菜单选项 `4`，然后选择运行模式：
- **重新开始监控**: 清空历史记录，从头开始
- **继续上次监控**: 从上次中断的地方继续

## 🔍 监控功能

### 代币类型支持
- **ERC20代币**: 标准代币转账

### 监控流程
1. **初始化检查**: 首次运行检查钱包在各链上的交易历史
2. **实时监控**: 每10秒扫描所有钱包的余额
3. **余额发现**: 检测到余额时立即记录
4. **自动转账**: 执行ERC20代币转账操作
5. **状态记录**: 记录已处理的钱包，避免重复处理

### 转账顺序
1. 首先转移所有ERC20代币
2. 最后转移原生代币（扣除gas费用）

## 📁 文件说明

### 配置文件
- `monitor_config.properties`: 主要配置文件
- `private_keys.txt`: 私钥文件（请确保安全）
- `monitored_addresses.txt`: 监控地址列表
- `processed_wallets.txt`: 已处理钱包记录
- `chain_activity.txt`: 链活动状态记录

### 日志文件
程序会输出详细的日志信息：
- `INFO`: 重要操作信息（发现余额、转账成功等）
- `WARN`: 警告信息（余额不足支付gas费等）
- `ERROR`: 错误信息（网络请求失败等）
- `DEBUG`: 调试信息（详细的监控状态）

## 🛡️ 安全注意事项

⚠️ **重要安全提醒**:

1. **私钥安全**: 
   - 私钥文件包含敏感信息，设置正确的文件权限
   - 不要在不安全的环境中运行程序
   - 定期备份重要配置文件

2. **网络安全**: 
   - 确保运行环境安全可靠
   - 使用可信的网络连接
   - 定期更新API密钥

3. **API密钥**: 
   - 保护好Alchemy API密钥
   - 避免在日志中记录敏感信息
   - 设置适当的API访问限制

4. **资金安全**: 
   - 在使用前进行小额测试
   - 确保目标地址正确无误
   - 监控转账结果

## 🔧 故障排除

### 常见问题

1. **编译失败**
   - 检查Java和Maven版本
   - 确保网络连接正常下载依赖

2. **网络连接失败**
   - 检查Alchemy API密钥是否正确
   - 验证网络连接状态
   - 检查防火墙设置

3. **私钥格式错误**
   - 确保私钥为64位十六进制字符串
   - 支持带/不带0x前缀
   - 检查私钥是否完整

4. **Gas费不足**
   - 确保钱包有足够的原生代币支付gas费
   - 不同链的gas费用不同
   - 高峰期gas费可能较高

5. **转账失败**
   - 检查网络状况
   - 验证目标地址格式
   - 确认钱包余额充足

### 日志分析

保存日志到文件：
```bash
java -jar target/multi-chain-wallet-monitor-1.0.0.jar > monitor.log 2>&1
```

查看实时日志：
```bash
tail -f monitor.log
```

## 🏗️ 技术架构

### 核心组件
- **ChainConfig**: 区块链网络配置管理（50+条链）
- **WalletMonitor**: 钱包余额和交易历史监控
- **TransactionSender**: ERC20代币自动转账
- **ConfigurationMenu**: 用户友好的配置界面
- **MultiChainWalletMonitor**: 主程序协调器

### 设计特点
- **模块化设计**: 各组件职责明确，易于维护
- **异步监控**: 每条链独立线程监控，提高效率
- **错误恢复**: 单个链错误不影响其他链的监控
- **状态持久化**: 配置和状态自动保存

## 📊 性能指标

- **监控间隔**: 10秒/轮
- **并发线程**: 最多10个（每条链一个）
- **地址数量**: 支持数千个地址监控
- **代币支持**: ERC20代币
- **响应时间**: 发现余额后立即处理
- **成功率**: >99%（网络正常情况下）

## 🚫 免责声明

此程序仅供学习和合法用途使用。使用者需要确保：

1. **合法性**: 拥有所有私钥对应钱包的合法控制权
2. **合规性**: 遵守当地法律法规和相关规定
3. **责任承担**: 使用程序产生的所有后果由使用者承担
4. **风险认知**: 理解区块链交易的不可逆性和风险

开发者不对任何损失、法律问题或其他后果承担责任。

## 📄 许可证

本项目采用 MIT 许可证。详情请参阅 LICENSE 文件。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进项目：

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📞 支持

如果遇到问题或需要帮助：
1. 查看本README的故障排除部分
2. 检查项目Issues
3. 提交新的Issue描述问题 
